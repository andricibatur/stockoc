<!DOCTYPE html>
<html>
<head>
  <title>Stok Gudang - Firebase</title>
  <meta charset="UTF-8">
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, button { margin: 5px; padding: 5px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #aaa; padding: 5px; text-align: left; }
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>
</head>
<body>

  <h2>ðŸ“¦ Aplikasi Stok Gudang</h2>

  <label>Nama Barang:</label><br>
  <input id="nama" placeholder="Contoh: Indomie"><br>

  <label>Jumlah:</label><br>
  <input id="jumlah" type="number" placeholder="Contoh: 100"><br>

  <button onclick="tambahBarang()">Tambah Stok</button>

  <h3>ðŸ“‹ Daftar Stok Barang</h3>
  <table>
    <thead>
      <tr><th>Nama</th><th>Jumlah</th><th>Waktu</th></tr>
    </thead>
    <tbody id="tabelStok"></tbody>
  </table>

  <script>
    // âœ… Firebase config milik Inul
    const firebaseConfig = {
      apiKey: "AIzaSyCsseWUEOKNoFGlpebt5b8om4RL-62HcO4",
      authDomain: "gudang-oc.firebaseapp.com",
      projectId: "gudang-oc",
      storageBucket: "gudang-oc.firebasestorage.app",
      messagingSenderId: "152032216937",
      appId: "1:152032216937:web:4e87a5f2514904d7841ff8"
    };

    // âœ… Inisialisasi Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ðŸ”¸ Tambah data ke Firestore
    function tambahBarang() {
      const nama = document.getElementById("nama").value.trim();
      const jumlah = parseInt(document.getElementById("jumlah").value.trim());

      if (!nama || isNaN(jumlah)) {
        alert("Lengkapi nama dan jumlah");
        return;
      }

      db.collection("stok").add({
        nama: nama,
        jumlah: jumlah,
        waktu: new Date()
      }).then(() => {
        document.getElementById("nama").value = "";
        document.getElementById("jumlah").value = "";
      });
    }

    // ðŸ”¸ Tampilkan stok real-time
    db.collection("stok").orderBy("waktu", "desc").onSnapshot(snapshot => {
      const tbody = document.getElementById("tabelStok");
      tbody.innerHTML = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        const row = `<tr>
          <td>${data.nama}</td>
          <td>${data.jumlah}</td>
          <td>${new Date(data.waktu.toDate()).toLocaleString()}</td>
        </tr>`;
        tbody.innerHTML += row;
      });
    });
  </script>

</body>
</html>
